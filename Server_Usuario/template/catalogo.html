<!DOCTYPE html>
<html lang="en">

<head>
    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <title>Coffee Shop</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- bootstrap css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <!-- style css -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!-- Responsive-->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- fevicon -->
    <link rel="icon" href="img/fevicon.png" type="image/gif" />
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <!-- owl stylesheets -->
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
        media="screen">
</head>

<body>
    <!--Header-->
    <div class="header_section">
        <div class="container-fluid">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="logo"><a href="index.html"><img src="img/logo.png" width="60%" height="60%"></a></div>
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="/pagina_inicial">Página inicial</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/catalogo">Catálogo</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/sobre_nos">Quem Somos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/fale_conosco">Fale conosco</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/carrinho">Carrinho</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>
    <div>
        <h1 class="about_taital">Catálogo</h1>
        <ul>
            {{range .Produtos}}
            <li class="read_bt" style="width: calc(33.33% - 20px);
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            background-color: #f9f9f9;
            text-align: center;">
                <strong style="display: block; font-weight: bold; margin-bottom: 5px;">{{.NomeProduto}}</strong>
                <span style="display: block; margin-bottom: 5px;">Valor: R${{.ValorVenda}}</span>
                <button style="
                padding: 5px 10px;
                background-color: green;
                color: whitesmoke;
                border: none;
                border-radius: 3px;
                cursor: pointer;" class="buy-button" data-codigo="{{.ID}}" data-nome="{{.NomeProduto}}"
                    data-valor="{{.ValorVenda}}">Comprar</button>
            </li>
            {{end}}
        </ul>
    </div>
    <div id="overlay"
        style="display: none; position: fixed; width: 100%; height: 100%; top: 0; left: 0; background-color: rgba(0, 0, 0, 0.5); z-index: 999;">
    </div>

    <div id="popup"
        style="display: none; position: fixed; width: 300px; background-color: #fff; padding: 20px; border-radius: 5px; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000;">
        <label for="productQty">Quantos produtos deseja acrescentar ao carrinho?</label>
        <br>
        <input type="number" id="productQty" min="0" value="0">
        <br><br>
        <button id="addCartBtn"
            style="padding: 5px 10px; background-color: green; color: whitesmoke; border: none; border-radius: 3px; cursor: pointer;">Adicionar</button>
    </div>
    <div class="footer_section layout_padding margin_top_0">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h1 class="address_text">Address</h1>
                    <div class="location_text"><a href="#"><img src="img/map-icon.png"><span
                                class="padding_left_15">No.123 Chalingt Gates,</span></a></div>
                    <div class="location_text"><a href="#"><img src="img/call-icon.png"><span class="padding_left_15">(
                                +01 9876543210 )</span></a></div>
                    <div class="location_text"><a href="#"><img src="img/mail-icon.png"><span
                                class="padding_left_15">Locations</span></a></div>
                </div>
                <div class="col-md-4">
                    <h1 class="address_text">Social link</h1>
                    <div class="location_text"><a href="#"><img src="img/fb-icon.png"><span
                                class="padding_left_15">Facebook</span></a></div>
                    <div class="location_text"><a href="#"><img src="img/twitter-icon.png"><span
                                class="padding_left_15">Twitter</span></a></div>
                    <div class="location_text"><a href="#"><img src="img/instagram-icon.png"><span
                                class="padding_left_15">Instagram</span></a></div>
                    <div class="location_text"><a href="#"><img src="img/Linkedin-icon.png"><span
                                class="padding_left_15">Linkedin</span></a></div>
                </div>
                <div class="col-md-4">
                    <h1 class="address_text">Newsletter</h1>
                    <input type="text" class="enter_text" placeholder="Enter Your Email">
                    <div class="subscribe_bt"><a href="#">subscribe</a></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Javascript files-->
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery-3.0.0.min.js"></script>
    <script src="js/plugin.js"></script>
    <!-- sidebar -->
    <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="js/custom.js"></script>
    <!-- javascript -->
    <script src="js/owl.carousel.js"></script>
    <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>

    <script>
        $(document).ready(function () {
            $('.buy-button').click(function () {
                var produto = {
                    codigoProduto: $(this).data('codigo'),
                    nomeProduto: $(this).data('nome'),
                    valorVenda: parseFloat($(this).data('valor'))
                };

                var quantidade = prompt("Quantos produtos deseja acrescentar ao carrinho?", "1");

                if (quantidade !== null && quantidade !== undefined && quantidade !== "") {
                    quantidade = parseInt(quantidade);
                    if (!isNaN(quantidade) && quantidade > 0) {
                        adicionarProdutoAoCarrinho(produto, quantidade);
                    } else {
                        alert("Por favor, insira uma quantidade válida.");
                    }
                } else {
                    // O usuário clicou em "Cancelar" ou não inseriu nenhuma quantidade
                    alert("Operação cancelada ou quantidade não especificada.");
                }
            });


            // Função para enviar os detalhes do produto ao backend
            function adicionarProdutoAoCarrinho(produto, quantidade) {
                $.ajax({
                    type: 'POST',
                    url: '/adicionar-ao-carrinho',
                    data: {
                        codigoProduto: produto.codigoProduto,
                        nomeProduto: produto.nomeProduto,
                        valorVenda: produto.valorVenda,
                        quantidadeProd: quantidade
                    },
                    success: function (response) {
                        alert('Produto adicionado ao carrinho!');
                    },
                    error: function () {
                        alert('Erro ao adicionar produto ao carrinho!');
                    }
                });
            }
        });
    </script>
</body>

</html>